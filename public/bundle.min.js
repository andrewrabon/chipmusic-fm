!function(t){var n={};function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(o,i,function(n){return t[n]}.bind(null,i));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){t.exports=e(1)},function(t,n,e){"use strict";e.r(n);const o=100,i="translate(0, -100vh)",s="translate(0, 0)";class r extends HTMLElement{constructor(t){super(t),this.id=t||void 0,document.body.appendChild(this),this.show()}close(){const t=this.getDialog();t.style.transform=i,setTimeout(()=>{t.close(),this.remove()},o)}getDialog(){return this.querySelector("dialog")}show(){const t=this.getDialog();t.showModal(),t.style.transform=s,this.querySelector(".dialog-close-button").addEventListener("click",()=>this.close())}}window.customElements.define("concrete-dialog",r);class a extends r{async connectedCallback(){this.innerHTML='\n      <dialog>\n        <article>\n          <h1>\n            About ChipMusic.fm\n            <button class="dialog-close-button"><i class="material-icons">close</i></button>\n          </h1>\n          <div class="dialog-content">\n            <p>Aren\'t dialogs cool? ðŸ¦„</p>\n          </div>\n        </article>\n      </dialog>\n    '}}window.customElements.define("about-dialog",a);class l extends r{async connectedCallback(){this.innerHTML='\n      <dialog>\n        <article>\n          <h1>\n            History\n            <button class="dialog-close-button"><i class="material-icons">close</i></button>\n          </h1>\n          <div class="dialog-content">\n            <p>Aren\'t dialogs cool? ðŸ¦„</p>\n          </div>\n        </article>\n      </dialog>\n    '}}window.customElements.define("history-dialog",l);class c extends r{async connectedCallback(){this.innerHTML='\n      <dialog>\n        <article>\n          <h1>\n            Likes\n            <button class="dialog-close-button"><i class="material-icons">close</i></button>\n          </h1>\n          <div class="dialog-content">\n            <p>Aren\'t dialogs cool? ðŸ¦„</p>\n          </div>\n        </article>\n      </dialog>\n    '}}window.customElements.define("likes-dialog",c);class d extends HTMLElement{constructor(t="#000"){super(),this.color=t}connectedCallback(){this.attachShadow({mode:"open"}).innerHTML=`\n      <svg class="loading-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="12px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">\n        <path fill="${this.color}" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z">\n          <animateTransform attributeType="xml"\n            attributeName="transform"\n            type="rotate"\n            from="0 25 25"\n            to="360 25 25"\n            dur="0.6s"\n            repeatCount="indefinite" />\n        </path>\n      </svg>\n    `}}window.customElements.define("concrete-loading-icon",d);window.customElements.define("concrete-button",class extends HTMLElement{connectedCallback(){this.attachShadow({mode:"open"}).innerHTML='\n        <style>\n          :host {\n            display: block;\n          }\n          :host([secondary]) button {\n            background: #666;\n          }\n          a {\n            display: block;\n            padding: 0.8em;\n            font-size: 0.8em;\n            font-family: system-ui;\n            background: black;\n            color: white;\n            cursor: pointer;\n            border: 0;\n            border-radius: inherit;\n            text-align: center;\n            text-decoration: none;\n          }\n          :host([disabled]) a,\n          a[disabled] {\n            color: #eee;\n            opacity: 0.25;\n            cursor: not-allowed;\n          }\n          concrete-loading-icon {\n            display: inline-block;\n            margin-right: 0.5rem;\n          }\n          @keyframes rotation {\n            from {\n              transform: rotate(0deg);\n            }\n            to {\n              transform: rotate(359deg);\n            }\n          }\n        </style>\n        <a id="button"><slot></slot></a>\n      ',this.addEventListener("click",()=>{const{parentElement:t}=this;"FORM"===t.nodeName&&t.dispatchEvent(new Event("submit"))});const t=this.getAttribute("href");"string"==typeof t&&this.setAttribute("href",t);const n=this.getAttribute("download");"string"==typeof n&&this.setAttribute("download",n)}static get observedAttributes(){return["disabled","download","href","loading"]}attributeChangedCallback(t,n,e){this.shadowRoot&&this.shadowRoot.getElementById("button").setAttribute(t,e)}get disabled(){return this.shadowRoot.getElementById("button").hasAttribute("disabled")}set disabled(t){const n=this.shadowRoot.getElementById("button");t?n.setAttribute("disabled",""):n.removeAttribute("disabled")}get href(){return this.shadowRoot.getElementById("button").getAttribute("download")}set href(t){this.shadowRoot.getElementById("button").setAttribute("download",t)}get href(){return this.shadowRoot.getElementById("button").getAttribute("href")}set href(t){this.shadowRoot.getElementById("button").setAttribute("href",t)}get loading(){return this.shadowRoot.getElementById("button").hasAttribute("loading")}set loading(t){if(t&&t===this.loading)return;const n=this.shadowRoot.getElementById("button"),e=new d("#fff");t?(n.prepend(e),n.setAttribute("disabled",!0)):(n.querySelector("concrete-loading-icon").remove(),n.removeAttribute("disabled"))}});class u extends r{async connectedCallback(){this.innerHTML='\n      <dialog>\n        <article>\n          <h1>\n            Register\n            <button class="dialog-close-button"><i class="material-icons">close</i></button>\n          </h1>\n          <form class="register-dialog__form">\n            <input name="email" type="email" placeholder="Enter your email address">\n            <input name="email-confirm" type="email" placeholder="Re-enter your email address">\n            <input name="password" type="password" placeholder="Enter your password">\n            <concrete-button class="register-dialog__submit">Register</concrete-button>\n            <a href="#" class="login-register-link">Already have an account? Login here.</a>\n          </form>\n        </article>\n      </dialog>\n    ',this.querySelector(".register-dialog__form").addEventListener("submit",()=>{const t=this.querySelector("[name=email]").value,n=(this.querySelector("[name=email-confirm]").value,this.querySelector("[name=password]").value),e=this.querySelector(".register-dialog__submit");e.loading=!0,e.disabled=!0,firebase.auth().createUserWithEmailAndPassword(t,n).then(()=>{this.close()}).catch(t=>{console.error(t),e.loading=!1,e.disabled=!1})}),this.querySelector(".login-register-link").addEventListener("click",t=>{t.preventDefault(),new h,this.close()})}}window.customElements.define("register-dialog",u);class h extends r{async connectedCallback(){this.innerHTML='\n      <dialog>\n        <article>\n          <h1>\n            Login\n            <button class="dialog-close-button"><i class="material-icons">close</i></button>\n          </h1>\n          <form class="login-dialog__form">\n            <input name="email" type="email" placeholder="Enter your email address">\n            <input name="password" type="password" placeholder="Enter your password">\n            <concrete-button class="login-dialog__submit">Login</concrete-button>\n            <a href="#" class="login-register-link">Don\'t have an account? Register here.</a>\n          </form>\n        </article>\n      </dialog>\n    ',this.querySelector(".login-dialog__form").addEventListener("submit",()=>{const t=this.querySelector("[name=email]").value,n=this.querySelector("[name=password]").value,e=this.querySelector(".login-dialog__submit");e.loading=!0,e.disabled=!0,firebase.auth().signInWithEmailAndPassword(t,n).then(()=>{this.close()}).catch(t=>{console.error(t),e.loading=!1,e.disabled=!1})}),this.querySelector(".login-register-link").addEventListener("click",t=>{t.preventDefault(),new u,this.close()})}}window.customElements.define("login-dialog",h);class g extends r{async connectedCallback(){this.innerHTML='\n      <dialog>\n        <article>\n          <h1>\n            Logout\n            <button class="dialog-close-button"><i class="material-icons">close</i></button>\n          </h1>\n          <p style="margin-bottom: 1rem;">Are you sure you want to logout?</p>\n          <concrete-button class="logout-dialog__submit">Logout</concrete-button>\n        </article>\n      </dialog>\n    ',this.querySelector(".logout-dialog__submit").addEventListener("click",()=>{firebase.auth().signOut()})}}window.customElements.define("logout-dialog",g);class m extends r{async connectedCallback(){this.innerHTML='\n      <dialog>\n        <article>\n          <h1>\n            Settings\n            <button class="dialog-close-button"><i class="material-icons">close</i></button>\n          </h1>\n          <div class="dialog-content">\n            <p>Aren\'t dialogs cool? ðŸ¦„</p>\n          </div>\n        </article>\n      </dialog>\n    '}}window.customElements.define("settings-dialog",m);class b extends HTMLElement{constructor(t){super(),void 0!==t&&(this.x=t.x,this.y=t.y,this.items=t.items)}connectedCallback(){this.attachShadow({mode:"open"}).innerHTML='\n      <style>\n        :host {\n          display: block;\n          position: relative;\n        }\n        #popover {\n          position: absolute;\n          right: 0;\n          top: 28px;\n          min-width: 10rem;\n          background: white;\n          border-radius: 5px;\n          box-shadow: 0px 1px 5px #aaa;\n          font-size: 0.8em;\n        }\n        ul, li {\n          margin: 0;\n          padding: 0;\n          list-style: none;\n        }\n        li {\n          padding: 1em;\n          cursor: pointer;\n        }\n        li + li {\n          border-top: 1px solid #dfdfdf;\n        }\n      </style>\n      <div id="popover">\n        <slot></slot>\n      </div>\n    ';const t=this.shadowRoot.getElementById("popover");if(this.items){const n=document.createElement("ul");t.append(n),this.items.forEach(t=>{const e=document.createElement("li");e.textContent=t.title,e.addEventListener("click",t.onClick),n.append(e)})}document.addEventListener("click",()=>this.checkBlur())}diconnectedCallback(){document.removeEventListener("click",()=>this.checkBlur())}checkBlur(){this.remove()}}window.customElements.define("concrete-popover",b);class p extends HTMLElement{constructor(t){super(t),this.href=t.href,this.songTitle=t.songTitle,this.songArtist=t.songArtist,this.listenCount=t.listenCount,this.likeCount=t.likeCount}connectedCallback(){this.innerHTML=`\n      <style>\n        song-card {\n          display: block;\n          height: 300px;\n        }\n        .song-card {\n          position: absolute;\n          top: calc(50vh - 170px);\n          right: 1rem;\n          left: 1rem;\n          display: block;\n          height: 300px;\n          background-color: white;\n          background-size: cover;\n          border-radius: 5px;\n          box-shadow: 0px 1px 5px #aaa;\n          transition: transform 0.3s ease;\n          transform: translate(100vw);\n        }\n        .song-card__bottom {\n          position: absolute;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          background: rgba(255, 255, 255, 0.85);\n          border-radius: 0 0 5px 5px;\n        }\n        .song-card__bottom h1,\n        .song-card__bottom h2,\n        .song-card__bottom h3 {\n          margin: 1rem;\n          border: 0;\n          background: transparent;\n          text-align: center;\n        }\n        .song-card__bottom h2,\n        .song-card__bottom h3 {\n          padding: 0;\n        }\n        .song-card__bottom h1 {\n          margin-top: 1.5rem;\n        }\n        @media screen and (min-width: 600px) {\n          .song-card {\n            top: calc(50vh - 178px);\n            width: 500px;\n            margin: 0 auto;\n          }\n        }\n      </style>\n      <a href=${this.href} class="song-card">\n        <div class="song-card__bottom">\n          <h1>${this.songTitle}</h1>\n          <h3>by ${this.songArtist} &middot; ${this.listenCount} plays &middot; ${this.likeCount} likes</h3>\n        </div>\n      </a>\n    `,this.getGif()}async getGif(){this.querySelector(".song-card").style.backgroundImage="url('https://media1.giphy.com/media/TRebCjNbc4dIA/giphy.gif?cid=3640f6095bb9a4d27037483763245fdb')"}enterFromSide(t){return new Promise(n=>{const e=this.querySelector(".song-card");if(e){const o=t?"-100vw":"100vw";e.style.transform=`translate(${o})`,setTimeout(()=>{e.style.transform="translate(0vw)",n()},10)}})}enterFromLeft(){return this.enterFromSide(!0)}enterFromRight(){return this.enterFromSide()}}window.customElements.define("song-card",p);class f extends HTMLElement{async connectedCallback(){this.innerHTML='\n      <style>\n        .music-controls {\n          position: absolute;\n          bottom: 0;\n          right: 0;\n          left: 0;\n          background: black;\n          color: white;\n          box-shadow: 0px 1px 5px #aaa;\n        }\n        .music-controls__buttons {\n          display: flex;\n        }\n        .music-controls__seek-bar {\n          -webkit-appearance: none;\n          -moz-apperance: none;\n          display: block;\n          width: calc(100% - 1rem);\n          height: 2rem;\n          margin: 0.5rem auto 0;\n          background: transparent;\n          border-radius: 5px 5px 0 0;\n          cursor: col-resize;\n        }\n        .music-controls__seek-bar::-webkit-slider-thumb {\n          -webkit-appearance: none;\n          background-color: white;\n          width: 5px;\n          height: 1.5em;\n          border-radius: 5px;\n        }\n        .music-controls__seek-bar::-moz-range-thumb {\n          background-color: white;\n          width: 10px;\n          height: 2em;\n          border-radius: 0;\n          border: 0;\n        }\n        .music-controls__seek-bar::-moz-range-track {\n          display: none;\n          background-color: transparent;\n        }\n        .music-controls__button {\n          flex: 1;\n          padding: 1rem;\n          background: transparent;\n          color: white;\n        }\n        @media screen and (min-width: 600px) {\n          .music-controls {\n            width: 500px;\n            height: 100px;\n            margin: 1rem auto;\n            border-radius: 5px;\n          }\n        }\n      </style>\n      <div class="music-controls">\n        <input class="music-controls__seek-bar" type="range">\n        <div class="music-controls__buttons">\n          <button class="music-controls__button">\n            <i class="material-icons">cloud_download</i>\n          </button>\n          <button class="music-controls__previous music-controls__button">\n            <i class="material-icons">skip_previous</i>\n          </button>\n          <button class="music-controls__button">\n            <i class="material-icons">play_circle_filled</i>\n          </button>\n          <button class="music-controls__next music-controls__button">\n            <i class="material-icons">skip_next</i>\n          </button>\n          <button class="music-controls__button">\n            <i class="material-icons">favorite_border</i>\n          </button>\n        </div>\n      </div>\n    ',this.querySelector(".music-controls__previous").addEventListener("click",()=>this.playPrevious()),this.querySelector(".music-controls__next").addEventListener("click",()=>this.playNext())}getSong(){return{link:"https://google.com",title:"Speedcore... (LSDJ Speedcore)",artist:"A Versus B",listenCount:Math.floor(Math.random()*Math.floor(1e3)),likeCount:0}}playNext(){const t=new CustomEvent("next",{detail:{song:this.getSong()}});this.dispatchEvent(t)}playPrevious(){const t=new CustomEvent("previous",{detail:{song:this.getSong()}});this.dispatchEvent(t)}}window.customElements.define("music-player",f);e(2);class y extends HTMLElement{constructor(){super(),this.songCard=null,this.playerCanPlay=!1,this.songHistory=[],this.isTransitioning=!1}connectedCallback(){this.innerHTML='\n      <div class="home-screen__song-container"></div>\n    ';const t=new f;t.addEventListener("previous",t=>this.goToPreviousSong(t.detail.song)),t.addEventListener("next",t=>this.goToNextSong(t.detail.song)),this.appendChild(t),t.playNext()}buildSongCard(t,n){const e=()=>{this.songCard=new p({href:t.link,songTitle:t.title,songArtist:t.artist,listenCount:t.listenCount,likeCount:t.likeCount}),this.querySelector(".home-screen__song-container").appendChild(this.songCard)};return new Promise(t=>{const o=this.querySelector(".song-card");if(o){const i=n?"100vw":"-100vw";o.style.transform=`translate(${i})`,setTimeout(()=>{o.parentElement.remove(),e(),t()},300)}else e(),t()})}async goToPreviousSong(t){await this.buildSongCard(t,!0),this.songCard.enterFromLeft()}async goToNextSong(t){await this.buildSongCard(t),this.songCard.enterFromRight()}}window.customElements.define("home-screen",y);let w=firebase.auth().currentUser;const v=document.getElementById("user-button");v.addEventListener("click",t=>{t.stopPropagation();let n=[{title:"Login",onClick:()=>new h},{title:"Register",onClick:()=>new u},{title:"About",onClick:()=>new a}];w&&(n=[{title:"Likes",onClick:()=>new c},{title:"History",onClick:()=>new l},{title:"Settings",onClick:()=>new m},{title:"About",onClick:()=>new a},{title:"Logout",onClick:()=>new g}]),v.after(new b({items:n}))}),firebase.auth().onAuthStateChanged(t=>{w=t||firebase.auth().currentUser}),document.querySelector("main").appendChild(new y)},function(t,n,e){(function(t){function e(t,n){for(var e=0,o=t.length-1;o>=0;o--){var i=t[o];"."===i?t.splice(o,1):".."===i?(t.splice(o,1),e++):e&&(t.splice(o,1),e--)}if(n)for(;e--;e)t.unshift("..");return t}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return o.exec(t).slice(1)};function s(t,n){if(t.filter)return t.filter(n);for(var e=[],o=0;o<t.length;o++)n(t[o],o,t)&&e.push(t[o]);return e}n.resolve=function(){for(var n="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var r=i>=0?arguments[i]:t.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(n=r+"/"+n,o="/"===r.charAt(0))}return n=e(s(n.split("/"),function(t){return!!t}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(t){var o=n.isAbsolute(t),i="/"===r(t,-1);return(t=e(s(t.split("/"),function(t){return!!t}),!o).join("/"))||o||(t="."),t&&i&&(t+="/"),(o?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(s(t,function(t,n){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function o(t){for(var n=0;n<t.length&&""===t[n];n++);for(var e=t.length-1;e>=0&&""===t[e];e--);return n>e?[]:t.slice(n,e-n+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var i=o(t.split("/")),s=o(e.split("/")),r=Math.min(i.length,s.length),a=r,l=0;l<r;l++)if(i[l]!==s[l]){a=l;break}var c=[];for(l=a;l<i.length;l++)c.push("..");return(c=c.concat(s.slice(a))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var n=i(t),e=n[0],o=n[1];return e||o?(o&&(o=o.substr(0,o.length-1)),e+o):"."},n.basename=function(t,n){var e=i(t)[2];return n&&e.substr(-1*n.length)===n&&(e=e.substr(0,e.length-n.length)),e},n.extname=function(t){return i(t)[3]};var r="b"==="ab".substr(-1)?function(t,n,e){return t.substr(n,e)}:function(t,n,e){return n<0&&(n=t.length+n),t.substr(n,e)}}).call(this,e(3))},function(t,n){var e,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:s}catch(t){e=s}try{o="function"==typeof clearTimeout?clearTimeout:r}catch(t){o=r}}();var l,c=[],d=!1,u=-1;function h(){d&&l&&(d=!1,l.length?c=l.concat(c):u=-1,c.length&&g())}function g(){if(!d){var t=a(h);d=!0;for(var n=c.length;n;){for(l=c,c=[];++u<n;)l&&l[u].run();u=-1,n=c.length}l=null,d=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===r||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(n){try{return o.call(null,t)}catch(n){return o.call(this,t)}}}(t)}}function m(t,n){this.fun=t,this.array=n}function b(){}i.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new m(t,n)),1!==c.length||d||a(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=b,i.addListener=b,i.once=b,i.off=b,i.removeListener=b,i.removeAllListeners=b,i.emit=b,i.prependListener=b,i.prependOnceListener=b,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}]);